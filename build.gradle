buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:0.12.1'
    }
}

apply plugin: 'android'

android {
    buildToolsVersion "20"
    compileSdkVersion 20

    defaultConfig {
    	versionCode 1
    	versionName "1.0"
    	minSdkVersion 14
    	targetSdkVersion 20
    	applicationId "com.aaa.bbb"
    }

	sourceSets {
		main {
            // Prevent gradle from building native code.
            // Gradle support for native code is not complete yet, use manual build.
            jni.srcDirs = []

            jniLibs.srcDir 'build/native/libs'
		}
	}
}

task buildNativeCode (type: Exec) {
    workingDir './src/main/jni'

    commandLine './build.sh'
}

preBuild.dependsOn buildNativeCode

task appStart(type: Exec, dependsOn: ':installDebug') {
    commandLine 'adb', 'shell', 'am', 'start', '-n', 'com.aaa.bbb/.MainActivity'
}
